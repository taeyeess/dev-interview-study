현재 웹 프론트 기술에서 빼놓을수 없는 SPA와 최근 웹 프론트에서 인기 많은 언어인 React의 이해를 높이기 위해 
**SPA**란 무엇인지, 어떻게 사용하는 것인지, 그래서 **React**를 왜 사용하는지 전반적으로 살펴보기 위해 이 글을 작성한다.

## SPA (Single Page Application)

SPA를 설명하기 전에 잠깐 일반적인 웹에 대해 설명하자면,
#### 전통적인 웹

전통적인 웹에서 페이지 이동을 할 때 서버에 요청을 하면 서버가 HTML 파일을 만들어서 클라이언트에 보내주고, 브라우저가 HTML을 반영해서 보여주기 전 새로고침이 일어난다. 
이를 **정적 웹페이지**라고 하는데 이는 <u>'클라이언트에게 제공하기 위해 미리 작성되어 서비스되는 HTML문서'</u> 라고 정의한다. 이는 사용성이 좋지 않으며, 변경이 필요없는 부분까지도 전체페이지를 갱신하므로 비효율적이다. 

### 그래서, SPA

정적 웹 페이지의 단점을 보완하고자 나왔다. 
말 그대로 한 개의 페이지로만 이루어진 애플리케이션이다.
SPA는 페이지 이동시 AJAX로 요청하고, 서버는 JSON만 전달한다. 페이지 이동시 변경되는 부분만 JSON으로 받아온 뒤, 브라우저의 자바스크립트에서 받은 JSON을 토대로 DOM에 변경된 부분만 렌더링한다. 필요한 부분만 갱신하기 때문에 네이티브 앱에 가까운 자연스러운 페이지 이동과 사용자 경험을 제공할 수 있다. 


|![](https://velog.velcdn.com/images/taeyeeya/post/a3dbad6d-0126-4544-97b2-186c890dee98/image.png)|
|:--:|
|사진 출처: https://enhjh.tistory.com/73|


**_여기서 DOM이란?_**
- 브라우저 객체 모델(BOM, Browser Object Model) : 브라우저와 관련된 객체들의 집합

- 문서 객체 모델(DOM, Document Object Model) : HTML, XML 문서에 접근하기 위한 일종의 인터페이스. HTML, CSS가 사용자에게 직접적으로 보이는 것이라면, DOM은 기계나 소프트웨어가 웹 사이트 구조를 어떻게 이해하는 지에 대한 표준


### 단순히 싱글페이지라고 해서 화면이 한가지 종류이냐?

그렇지 않다. SPA의 경우 서버에서 사용자에게 제공하는 페이지는 한 종류이지만, 해당 페이지에서 로딩된 자바스크립트와 현재 사용자의 브라우저 주소 상태에 따라 다양한 화면을 보여줄 수 있다. 
블로그를 예로 들면 블로그의 한 페이지에서 홈, CRUD 등을 할 수 있도록 하는 것이다. 
한 페이지에서 다른 url주소를 통해서 작업하는 것이라고 생각하면 된다. 이를 **라우팅**이라고 한다.

여기서 **SPA 라이팅을 구현하는 2가지 방법**이 있는데
>	1. history API를 이용한 방법
>	2. hash를 이용한 방법

이 있다. SPA에서는 주로 history API를 이용해서 pushstate, popstate이벤트로 구현하고, 실제로 페이지가 reload 되지 않는다. 

#### history API
> 📎MDN DOM의 Window 객체는 history 객체를 통해 브라우저의 세션 기록에 접근할 수 있는 방법을 제공합니다. history는 사용자를 자신의 방문 기록 앞과 뒤로 보내고 기록 스택의 콘텐츠도 조작할 수 있는, 유용한 메서드와 속성을 가집니다.

window의 history 객체를 이용할 수 있게 하는 API이다. url창에 사용자가 입력한 주소들은 일종의 주소록에 보관되는데, 그 주소록을 다룰 수 있게 하는거라고 이해했다. 즉, 뒤로가기 했을 때 이전 페이지가 로드되고 하는 것은 주소록 안에서 저장되어 있는 이전 주소를 불러오기에 가능한 것이다.

리액트 라이브러리에서는 라우팅이 자체적으로 내장되어 있지는 않지만, 브라우저의 API를 직접 사용하여 이를 관리하거나, 라이브러리를 사용하면 이 작업을 쉽게 할 수 있다. (리액트 라우터, 리치라우터, next.js등등)

`react-router-dom`의 `< Link >`를 사용하면 HTML의 앵커 요소(`< a >` 태그)처럼 페이지를 이동하게 만들 수 있다. 차이점은, Link를 사용하면 실제로 페이지가 reload 되지 않은 체로 렌더링되는 UI만 달라진다. 또한, react-router-dom 라이브러리는 history 라이브러리를 활용하기 때문에, VanillaJS에서 history를 이용해서 라우팅을 구현할 때와 내부적으로 유사하게 작동한다.

**리액트 라우터**를 사용하면, 클라이언트 사이드에서 이루어지는 라우팅을 아주 간단하게 구현할 수 있도록 해주고, 더 나아가서 서버 사이드 렌더링을 할때도 라우팅을 도와주는 컴포넌트들을 제공해 준다. 
여기에서,
#### 서버 사이드 렌더링 (SSR)
- 페이지를 이동할 때마다 새로운 페이지를 요청하는 것.
- 모든 템플릿은 서버 연산을 통해서 렌더링하고 완성된 페이지 형태로 응답한다. 

그러나 리액트에서는 이렇게 한다고 하지 않았다. 

그게 바로,

#### 클라이언트 사이드 렌더링 (CSR)
- 클라이언트에서 렌더링 하는 방식
첫 요청시 한 페이지만 불러와 사용자의 행동에 따른 필요한 부분만 다시 읽어들이기 때문에 서버 측에서 렌더링하여 전체 페이지를 새로 띄우는 것 보다 빠른 인터렉션을 기대할 수 있다. 
리로딩 없이 서버로부터 받아서 화면을 갱신하기만 하면 된다. 

그래서 인터렉티브한 SPA를 만들기에 아주 최적화 되어있는 리액트를 사용하는데 
### 왜 서버 사이드 렌더링 개념이 필요하냐?

앱의 규모가 커지면 자바스크립트 파일이 너무 커지기 때문에, 페이지 로딩 시 사용자가 실제로 방문하지 않을 수도 있는 페이지의 스크립트도 불러와야하고, 해당 페이지에서 backend서버에 어떤 데이터를 불러오는 작업까지 있어야 한다면, 이 또한 과정이 복잡해지고 성능이 저하될 수 있다. 
가장 큰 탄점은, 자바스크립트를 실행하지 않은 일반 크롤러에서는 페이지의 정보를 제대로 수집해 가지 못하기 때문에 구글, 네이버, 다음 같은 검색 엔진의 검색 결과에 페이지가 잘 나타나지 않는다는 단점이 존재한다. (SEO 관련성)
그렇기 때문에 서버 사이드 렌더링(SSR)이 필요한 시점이 나타나게 된다. 

그래서,

## ✨ SPA의 장점

- 서버로부터 하나의 HTML 파일만 다운로드 하면 됨
- 페이지 이동 속도가 빨라서 UX 측면에서 좋음 — 기존의 웹 페이지는 새로운 경로(url)로 이동할 때 마다 새로운 HTML 파일과 그에 따른 리소스를 서버에서 다운로드 받아야 했기 때문에, 빈 페이지가 화면에 띄워져 있는 시간이 길어질 때가 있었음

## ✨ SPA의 단점

- SEO 측면에서 안 좋음 — DOM이 자바스크립트 파일을 다운 받고, 파싱하면서 형성되기 때문에 검색엔진이 내용을 파악하는 데 어려움이 있음
- 첫 로딩 시간이 너무 길어질 수 있음


**SPA 라이팅을 구현하는 2가지 방법**에 관한 참고용 블로그
https://bokjiho.medium.com/vanillajs%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-spa%EC%97%90%EC%84%9C-%EB%9D%BC%EC%9A%B0%ED%8C%85%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95-feat-history-api-4b5e3a3af185